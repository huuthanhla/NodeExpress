extends ../layouts/common
block content
	
  div

    h1 Products
    .d-flex.align-items-center
      form.ml-auto(action="/users/search", method="GET" class="d-flex")
        input(type="text", class="form-control ml-2", name="q" value=query ? query : '')
        button(class="btn btn-primary ml-2") Search
  

    nav(aria-label='...')
      ul.pagination.justify-content-start
        if (page - 1 > 0)
          li.page-item
            a.page-link(href='?page=' + (parseInt(page) - 1), tabindex='-1') Previous
        else
          li.page-item.disabled
            a.page-link(href='#', tabindex='-1', aria-disabled='true') Previous
        if (page - 1 > 0)
          li.page-item
            a.page-link(href='?page=' + (parseInt(page) - 1))= page - 1
        li.page-item.active(aria-current='page')
          a.page-link(href='?page=' + page)= page            
            span.sr-only (current)
        li.page-item
          a.page-link(href='?page=' + (parseInt(page) + 1))= page + 1
        li.page-item
          a.page-link(href='?page=' + (parseInt(page) + 1)) Next

    .row
      each product in products
        .col-sm-3
          .card.mb-3
            img.card-img-top(src=product.image, alt='...')
            .card-body
              h5.card-title= product.name
              p.card-text= product.description
              a.btn.btn-primary(href='/cart/add/' + product.id) Add to cart
    

    nav(aria-label='...')
      ul.pagination.justify-content-end
        if (page - 1 > 0)
          li.page-item
            a.page-link(href='?page=' + (parseInt(page) - 1), tabindex='-1') Previous
        else
          li.page-item.disabled
            a.page-link(href='#', tabindex='-1', aria-disabled='true') Previous
        if (page - 1 > 0)
          li.page-item
            a.page-link(href='?page=' + (parseInt(page) - 1))= page - 1
        li.page-item.active(aria-current='page')
          a.page-link(href='?page=' + page)= page            
            span.sr-only (current)
        li.page-item
          a.page-link(href='?page=' + (parseInt(page) + 1))= page + 1
        li.page-item
          a.page-link(href='?page=' + (parseInt(page) + 1)) Next